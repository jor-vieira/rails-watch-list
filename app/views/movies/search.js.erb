document.addEventListener("DOMContentLoaded", function() {
  document.getElementById("movie-search-form").addEventListener("submit", function(event) {
    event.preventDefault();

    let query = document.getElementById("query").value;
    if (query.trim() === "") return;

    fetch(`/movies/search?query=${encodeURIComponent(query)}`, { headers: { "Accept": "application/json" } })
      .then(response => response.json())
      .then(data => {
        let resultsContainer = document.getElementById("movie-results");
        resultsContainer.innerHTML = ""; // Limpa resultados anteriores

        data.forEach(movie => {
          let movieElement = document.createElement("div");
          movieElement.classList.add("movie-item");
          movieElement.innerHTML = `
            <h4>${movie.title}</h4>
            <img src="https://image.tmdb.org/t/p/w200${movie.poster_path}" alt="${movie.title}">
          `;
          resultsContainer.appendChild(movieElement);
        });
      })
      .catch(error => console.error("Erro ao buscar filmes:", error));
  });
});
